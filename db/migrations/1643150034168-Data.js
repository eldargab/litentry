module.exports = class Data1643150034168 {
  name = 'Data1643150034168'

  async up(db) {
    await db.query(`CREATE TABLE "substrate_transfer" ("id" character varying NOT NULL, "network" character varying(8) NOT NULL, "symbol" text NOT NULL, "decimals" integer NOT NULL, "to_account_balance_at_block" numeric NOT NULL, "from_account_balance_at_block" numeric NOT NULL, "amount" numeric NOT NULL, "tip" numeric NOT NULL, "block_number" numeric NOT NULL, "date" TIMESTAMP WITH TIME ZONE NOT NULL, "to_id" character varying NOT NULL, "from_id" character varying NOT NULL, CONSTRAINT "PK_f7ea2c56f3b29629c6ae9dd6e9c" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_1839b256d3487cf45d74adfdde" ON "substrate_transfer" ("network") `)
    await db.query(`CREATE INDEX "IDX_224a10cc738a32130c0e00eeac" ON "substrate_transfer" ("to_id") `)
    await db.query(`CREATE INDEX "IDX_eac4f8b8b83179a3faf2b1c4d6" ON "substrate_transfer" ("from_id") `)
    await db.query(`CREATE TABLE "substrate_balance" ("id" character varying NOT NULL, "network" character varying(8) NOT NULL, "symbol" text NOT NULL, "decimals" integer NOT NULL, "balance" numeric NOT NULL, "first_transfer_in_date" TIMESTAMP WITH TIME ZONE, "first_transfer_in_block_number" numeric, "first_transfer_out_date" TIMESTAMP WITH TIME ZONE, "first_transfer_out_block_number" numeric, "last_transfer_in_date" TIMESTAMP WITH TIME ZONE, "last_transfer_in_block_number" numeric, "last_transfer_out_date" TIMESTAMP WITH TIME ZONE, "last_transfer_out_block_number" numeric, "total_transfers" integer, "account_id" character varying NOT NULL, "root_account_id" character varying NOT NULL, CONSTRAINT "PK_d3e6716f9ede882a9f4bb16d4e1" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_d1d216881f9fb7f16406feb31a" ON "substrate_balance" ("account_id") `)
    await db.query(`CREATE INDEX "IDX_ed0d7c615470de64e37bcf9afe" ON "substrate_balance" ("root_account_id") `)
    await db.query(`CREATE INDEX "IDX_d1e7af3c8389960ab27d3cfe56" ON "substrate_balance" ("network") `)
    await db.query(`CREATE TABLE "substrate_vote" ("id" character varying NOT NULL, "network" character varying(8) NOT NULL, "block_number" numeric NOT NULL, "date" TIMESTAMP WITH TIME ZONE NOT NULL, "account_id" character varying NOT NULL, "root_account_id" character varying NOT NULL, CONSTRAINT "PK_c11d850f7f695e6e55327b45360" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_4502200d728fe04552aacd3720" ON "substrate_vote" ("network") `)
    await db.query(`CREATE INDEX "IDX_8582455a30a8be505b5a63e76e" ON "substrate_vote" ("account_id") `)
    await db.query(`CREATE INDEX "IDX_a53c92e2ddcac33c57ee2565b4" ON "substrate_vote" ("root_account_id") `)
    await db.query(`CREATE TABLE "substrate_account" ("id" character varying NOT NULL, "network" character varying(8) NOT NULL, "prefix" integer NOT NULL, "total_votes" integer, "root_account_id" character varying NOT NULL, CONSTRAINT "PK_acdf5823c01651d238728d6e3d9" PRIMARY KEY ("id"))`)
    await db.query(`CREATE INDEX "IDX_3c18120b0899dd29f0dc3a9508" ON "substrate_account" ("root_account_id") `)
    await db.query(`CREATE INDEX "IDX_d89adc284320873064f07a96f1" ON "substrate_account" ("network") `)
    await db.query(`CREATE TABLE "substrate_root_account" ("id" character varying NOT NULL, CONSTRAINT "PK_bd3e7b144a5c84f6b12d645f875" PRIMARY KEY ("id"))`)
    await db.query(`ALTER TABLE "substrate_transfer" ADD CONSTRAINT "FK_224a10cc738a32130c0e00eeac3" FOREIGN KEY ("to_id") REFERENCES "substrate_balance"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_transfer" ADD CONSTRAINT "FK_eac4f8b8b83179a3faf2b1c4d61" FOREIGN KEY ("from_id") REFERENCES "substrate_balance"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_balance" ADD CONSTRAINT "FK_d1d216881f9fb7f16406feb31ac" FOREIGN KEY ("account_id") REFERENCES "substrate_account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_balance" ADD CONSTRAINT "FK_ed0d7c615470de64e37bcf9afe7" FOREIGN KEY ("root_account_id") REFERENCES "substrate_root_account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_vote" ADD CONSTRAINT "FK_8582455a30a8be505b5a63e76e1" FOREIGN KEY ("account_id") REFERENCES "substrate_account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_vote" ADD CONSTRAINT "FK_a53c92e2ddcac33c57ee2565b49" FOREIGN KEY ("root_account_id") REFERENCES "substrate_root_account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "substrate_account" ADD CONSTRAINT "FK_3c18120b0899dd29f0dc3a9508c" FOREIGN KEY ("root_account_id") REFERENCES "substrate_root_account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`DROP TABLE "substrate_transfer"`)
    await db.query(`DROP INDEX "public"."IDX_1839b256d3487cf45d74adfdde"`)
    await db.query(`DROP INDEX "public"."IDX_224a10cc738a32130c0e00eeac"`)
    await db.query(`DROP INDEX "public"."IDX_eac4f8b8b83179a3faf2b1c4d6"`)
    await db.query(`DROP TABLE "substrate_balance"`)
    await db.query(`DROP INDEX "public"."IDX_d1d216881f9fb7f16406feb31a"`)
    await db.query(`DROP INDEX "public"."IDX_ed0d7c615470de64e37bcf9afe"`)
    await db.query(`DROP INDEX "public"."IDX_d1e7af3c8389960ab27d3cfe56"`)
    await db.query(`DROP TABLE "substrate_vote"`)
    await db.query(`DROP INDEX "public"."IDX_4502200d728fe04552aacd3720"`)
    await db.query(`DROP INDEX "public"."IDX_8582455a30a8be505b5a63e76e"`)
    await db.query(`DROP INDEX "public"."IDX_a53c92e2ddcac33c57ee2565b4"`)
    await db.query(`DROP TABLE "substrate_account"`)
    await db.query(`DROP INDEX "public"."IDX_3c18120b0899dd29f0dc3a9508"`)
    await db.query(`DROP INDEX "public"."IDX_d89adc284320873064f07a96f1"`)
    await db.query(`DROP TABLE "substrate_root_account"`)
    await db.query(`ALTER TABLE "substrate_transfer" DROP CONSTRAINT "FK_224a10cc738a32130c0e00eeac3"`)
    await db.query(`ALTER TABLE "substrate_transfer" DROP CONSTRAINT "FK_eac4f8b8b83179a3faf2b1c4d61"`)
    await db.query(`ALTER TABLE "substrate_balance" DROP CONSTRAINT "FK_d1d216881f9fb7f16406feb31ac"`)
    await db.query(`ALTER TABLE "substrate_balance" DROP CONSTRAINT "FK_ed0d7c615470de64e37bcf9afe7"`)
    await db.query(`ALTER TABLE "substrate_vote" DROP CONSTRAINT "FK_8582455a30a8be505b5a63e76e1"`)
    await db.query(`ALTER TABLE "substrate_vote" DROP CONSTRAINT "FK_a53c92e2ddcac33c57ee2565b49"`)
    await db.query(`ALTER TABLE "substrate_account" DROP CONSTRAINT "FK_3c18120b0899dd29f0dc3a9508c"`)
  }
}
